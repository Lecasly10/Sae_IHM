#!/bin/bash

attend() {
    read -p "" 
}

push() {
	pull
    echo "Message du commit"
    read rep
    git config --global user.email "victorien.denoyelle@epitech.eu"
    git add -A
    git commit -m "$rep"
    git push
    echo -e "Push effectué\n"
}

pull() {
    git pull
    echo -e "Pull effectué\n"
}

clone() {
    echo "Répertoire à cloner"
    read rep
    git clone "$rep"
    echo -e "Clone effectué\n"
}

tag() {
    echo "Tag à créer :"
    read rep

    # Vérifie si le tag existe déjà
    if git rev-parse "$rep" >/dev/null 2>&1; then
        echo "⚠️  Le tag '$rep' existe déjà. Abandon."
    else
        git tag "$rep"
        echo -e "✅ Tag '$rep' créé\n"
        git push origin "$rep"
    fi
}

branche() {
    echo "Nom de la branche à créer :"
    read rep
    git checkout -b "$rep"
    echo -e "Branche '$rep' créée\n"
}

retourner() {
    echo "Retour sur la branche 'main'"
    git checkout main 2>/dev/null || git checkout master
    echo -e "✅ Maintenant sur la branche principale\n"
}

clear
select choix in "push" "pull" "clone" "status" "tag" "créer une branche" "retourner sur main branch" "quitter"
do
    case $REPLY in
        1) push ;;
        2) pull ;;
        3) clone ;;
        4) git status ;;
        5) tag ;;
        6) branche ;;
        7) retourner ;;
        8) break ;;
        *) echo "Mauvaise entrée" ;;
    esac
	attend
	clear
done
